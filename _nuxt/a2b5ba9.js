(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{100:function(e,t,n){"use strict";n.r(t);n(27);var r=n(2),o=n(26),c=n(45);t.default={namespaced:!0,state:{list:[],item:null},mutations:{setList:function(e,t){e.list=t},setItem:function(e,t){e.item=t}},actions:{fetchList:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,!$nuxt.isOnline){t.next=14;break}return t.next=4,o.a.ts.get();case 4:if(t.sent){t.next=14;break}return t.prev=6,t.next=9,o.a.updateDB();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),console.warn(t.t0);case 14:return t.t1=n,t.next=17,c.a.getSongsList();case 17:t.t2=t.sent,(0,t.t1)("setList",t.t2);case 19:case"end":return t.stop()}}),t,null,[[6,11]])})))()},fetchItem:function(e,t){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,n.t0=r,n.next=4,c.a.getSong(t);case 4:n.t1=n.sent,(0,n.t0)("setItem",n.t1);case 6:case"end":return n.stop()}}),n)})))()}}}},104:function(e,t,n){"use strict";n(27);var r=n(2);n(26);t.a=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.app;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},155:function(e,t,n){"use strict";n(19);var r={data:function(){return{title:null}},watch:{$route:function(e){this.title=e.name}}},o=n(56),c=n(109),f=n.n(c),m=n(234),h=n(235),component=Object(o.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("v-main",[t("nuxt")],1)],1)}),[],!1,null,null,null);t.a=component.exports;f()(component,{VApp:m.a,VMain:h.a})},165:function(e,t,n){e.exports=n(166)},197:function(e,t,n){"use strict";n.r(t);var r=n(53),o=(n(45),n(26),n(99)),c=n(100);t.default=function(){return new r.a.Store({state:{},getters:{},mutations:{},actions:{},modules:{settings:o.default,songs:c.default}})}},26:function(e,t,n){"use strict";n(27);var r=n(2),o=(n(19),n(5)),c=n(17),f=n(45),m=function(){function e(t,n){Object(o.a)(this,e),this.value=void 0,this.name=t,this.defaultValue=n}var t,n;return Object(c.a)(e,[{key:"get",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.value){e.next=4;break}return e.next=3,f.a.getSettings(this.name,this.defaultValue);case 3:this.value=e.sent;case 4:return e.abrupt("return",this.value);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"set",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.value===t){e.next=3;break}return e.next=3,f.a.setSettings(this.name,t);case 3:this.value=t;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();t.a={ts:new m("ts",0),useDarkTheme:new m("useDarkTheme",!0),fontScale:new m("fontScale",100),showChords:new m("showChords",!1),updateDB:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("settings.updateDB"),t.next=3,f.a.updateDB();case 3:return n=t.sent,t.next=6,e.ts.set(n);case 6:case"end":return t.stop()}}),t)})))()}}},45:function(e,t,n){"use strict";n(12),n(3),n(27);var r,o=n(2),c=(n(26),n(198)),f=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;t.a={getDb:function(){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){if(r)return e(r);var n=f.open("songsdb",1);n.onerror=function(e){console.log("Error opening db",e),t("Error")},n.onsuccess=function(t){r=t.target.result,e(r)},n.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore("settings",{keyPath:"name"}),t.createObjectStore("songs",{keyPath:"n"})}})));case 1:case"end":return e.stop()}}),e)})))()},getSongsList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDb();case 2:return n=t.sent,t.abrupt("return",new Promise((function(e){var t=n.transaction(["songs"],"readonly");t.oncomplete=function(){e(o)};var r=t.objectStore("songs"),o=[];r.openCursor().onsuccess=function(e){var cursor=e.target.result;cursor&&(o.push({name:cursor.value.n+". "+cursor.value.title,n:cursor.value.n}),cursor.continue())}})));case 4:case"end":return t.stop()}}),t)})))()},getSong:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDb();case 2:return r=n.sent,n.abrupt("return",new Promise((function(t,n){var o=r.transaction(["songs"],"readonly").objectStore("songs").get(parseInt(e));o.onerror=function(e){n()},o.onsuccess=function(e){t(o.result)}})));case 4:case"end":return n.stop()}}),n)})))()},hasSong:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDb();case 2:return r=n.sent,n.abrupt("return",new Promise((function(t,n){var o=r.transaction(["settings"],"readonly").objectStore("settings").count(parseInt(e));o.onerror=function(e){n()},o.onsuccess=function(e){t(!!o.result)}})));case 4:case"end":return n.stop()}}),n)})))()},addSong:function(data){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDb();case 2:return n=t.sent,t.abrupt("return",new Promise((function(e){var t=n.transaction(["songs"],"readwrite");t.oncomplete=function(){e()},t.objectStore("songs").put(data)})));case 4:case"end":return t.stop()}}),t)})))()},getSettings:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getDb();case 2:return o=r.sent,r.abrupt("return",new Promise((function(n,r){var c=o.transaction(["settings"],"readonly").objectStore("settings").get(e);c.onerror=function(e){r()},c.onsuccess=function(e){var r=t;c.result&&(r=c.result.value),n(r)}})));case 4:case"end":return r.stop()}}),r)})))()},setSettings:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getDb();case 2:return o=r.sent,r.abrupt("return",new Promise((function(n){var r=o.transaction(["settings"],"readwrite");r.oncomplete=function(){n()},r.objectStore("settings").put({name:e,value:t})})));case 4:case"end":return r.stop()}}),r)})))()},updateDB:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=$nuxt.$options.router.history.base+"/songs.json",f=Date.now();c.get(r+"?"+f).then(function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(r){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=regeneratorRuntime.keys(r.data);case 1:if((n.t1=n.t0()).done){n.next=7;break}return i=n.t1.value,n.next=5,e.addSong(r.data[i]);case 5:n.next=1;break;case 7:console.log("update db"),t(f);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){n(e)}))})));case 1:case"end":return t.stop()}}),t)})))()}}},99:function(e,t,n){"use strict";n.r(t);n(27);var r=n(2),o=n(26);t.default={namespaced:!0,state:{fontScale:100,useDarkTheme:!1,showChords:!1},getters:{fontScale:function(e){return e.fontScale}},mutations:{setFontScale:function(e,t){e.fontScale=t},setUseDarkTheme:function(e,t){this.app.vuetify.framework.theme.dark=t,e.useDarkTheme=t},setShowChords:function(e,t){e.showChords=t}},actions:{fetchFontScale:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.t0=n,t.next=4,o.a.fontScale.get();case 4:t.t1=t.sent,(0,t.t0)("setFontScale",t.t1);case 6:case"end":return t.stop()}}),t)})))()},saveFontScale:function(e,t){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,o.a.fontScale.set(t);case 3:r("setFontScale",t);case 4:case"end":return n.stop()}}),n)})))()},fetchUseDarkTheme:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.t0=n,t.next=4,o.a.useDarkTheme.get();case 4:t.t1=t.sent,(0,t.t0)("setUseDarkTheme",t.t1);case 6:case"end":return t.stop()}}),t)})))()},saveUseDarkTheme:function(e,t){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,o.a.useDarkTheme.set(t);case 3:r("setUseDarkTheme",t);case 4:case"end":return n.stop()}}),n)})))()},fetchShowChords:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.t0=n,t.next=4,o.a.showChords.get();case 4:t.t1=t.sent,(0,t.t0)("setShowChords",t.t1);case 6:case"end":return t.stop()}}),t)})))()},saveShowChords:function(e,t){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,n.next=3,o.a.showChords.set(t);case 3:r("setShowChords",t);case 4:case"end":return n.stop()}}),n)})))()}}}}},[[165,8,4,9]]]);