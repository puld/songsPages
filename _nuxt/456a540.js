(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{152:function(e,t,n){"use strict";n(24);var r={data:function(){return{title:null}},watch:{$route:function(e){this.title=e.name}}},o=n(54),c=n(106),f=n.n(c),m=n(231),v=n(232),component=Object(o.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("v-main",[t("nuxt")],1)],1)}),[],!1,null,null,null);t.a=component.exports;f()(component,{VApp:m.a,VMain:v.a})},162:function(e,t,n){e.exports=n(163)},194:function(e,t,n){"use strict";n.r(t);n(30);var r=n(2),o=n(51),c=n(40),f=n(57);t.default=function(){return new o.a.Store({state:{fontScale:null,useDarkTheme:null,songs:[],song:{},hasSong:!1},getters:{fontScale:function(e){return e.fontScale},useDarkTheme:function(e){return e.useDarkTheme},songs:function(e){return e.songs},song:function(e){return e.song},hasSong:function(e){return e.hasSong}},mutations:{setFontScale:function(e,t){e.fontScale=t},setUseDarkTheme:function(e,t){e.useDarkTheme=t},setSongs:function(e,t){e.songs=t},setSong:function(e,t){e.song=t},setHasSong:function(e,t){e.hasSong=t}},actions:{fetchFontScale:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.t0=n,t.next=4,f.a.fontScale.get();case 4:t.t1=t.sent,(0,t.t0)("setFontScale",t.t1);case 6:case"end":return t.stop()}}),t)})))()},fetchUseDarkTheme:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.t0=n,t.next=4,f.a.useDarkTheme.get();case 4:t.t1=t.sent,(0,t.t0)("setUseDarkTheme",t.t1);case 6:case"end":return t.stop()}}),t)})))()},fetchSongs:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.commit,!$nuxt.isOnline){t.next=14;break}return t.next=4,f.a.ts.get();case 4:if(t.sent){t.next=14;break}return t.prev=6,t.next=9,f.a.updateDB();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),console.warn(t.t0);case 14:return t.t1=n,t.next=17,c.a.getSongs();case 17:t.t2=t.sent,(0,t.t1)("setSongs",t.t2);case 19:case"end":return t.stop()}}),t,null,[[6,11]])})))()},fetchSong:function(e,t){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,n.t0=r,n.next=4,c.a.getSong(t);case 4:n.t1=n.sent,(0,n.t0)("setSong",n.t1);case 6:case"end":return n.stop()}}),n)})))()},fetchHasSong:function(e,t){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.commit,n.t0=r,n.next=4,c.a.hasSong(t);case 4:n.t1=n.sent,(0,n.t0)("setHasSong",n.t1);case 6:case"end":return n.stop()}}),n)})))()}}})}},40:function(e,t,n){"use strict";n(13),n(3),n(30);var r,o=n(2),c=(n(57),n(195)),f=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;t.a={getDb:function(){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){if(r)return e(r);var n=f.open("songsdb",1);n.onerror=function(e){console.log("Error opening db",e),t("Error")},n.onsuccess=function(t){r=t.target.result,e(r)},n.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore("settings",{keyPath:"name"}),t.createObjectStore("songs",{keyPath:"n"})}})));case 1:case"end":return e.stop()}}),e)})))()},getSongs:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDb();case 2:return n=t.sent,t.abrupt("return",new Promise((function(e){var t=n.transaction(["songs"],"readonly");t.oncomplete=function(){e(o)};var r=t.objectStore("songs"),o=[];r.openCursor().onsuccess=function(e){var cursor=e.target.result;cursor&&(o.push(cursor.value),cursor.continue())}})));case 4:case"end":return t.stop()}}),t)})))()},getSong:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDb();case 2:return r=n.sent,n.abrupt("return",new Promise((function(t,n){var o=r.transaction(["songs"],"readonly").objectStore("songs").get(parseInt(e));o.onerror=function(e){n()},o.onsuccess=function(e){t(o.result)}})));case 4:case"end":return n.stop()}}),n)})))()},hasSong:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDb();case 2:return r=n.sent,n.abrupt("return",new Promise((function(t,n){var o=r.transaction(["settings"],"readonly").objectStore("settings").count(parseInt(e));o.onerror=function(e){n()},o.onsuccess=function(e){t(!!o.result)}})));case 4:case"end":return n.stop()}}),n)})))()},addSong:function(data){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDb();case 2:return n=t.sent,t.abrupt("return",new Promise((function(e){var t=n.transaction(["songs"],"readwrite");t.oncomplete=function(){e()},t.objectStore("songs").put(data)})));case 4:case"end":return t.stop()}}),t)})))()},getSettings:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getDb();case 2:return o=r.sent,r.abrupt("return",new Promise((function(n,r){var c=o.transaction(["settings"],"readonly").objectStore("settings").get(e);c.onerror=function(e){r()},c.onsuccess=function(r){var o=c.result&&c.result.value||t;console.log("read setting "+e,o),n(o)}})));case 4:case"end":return r.stop()}}),r)})))()},setSettings:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getDb();case 2:return o=r.sent,r.abrupt("return",new Promise((function(n){var r=o.transaction(["settings"],"readwrite");r.oncomplete=function(){n()},r.objectStore("settings").put({name:e,value:t})})));case 4:case"end":return r.stop()}}),r)})))()},updateDB:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=$nuxt.$options.router.history.base+"/songs.json",f=Date.now();c.get(r+"?"+f).then(function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(r){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=regeneratorRuntime.keys(r.data);case 1:if((n.t1=n.t0()).done){n.next=7;break}return i=n.t1.value,n.next=5,e.addSong(r.data[i]);case 5:n.next=1;break;case 7:console.log("update db"),t(f);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){n(e)}))})));case 1:case"end":return t.stop()}}),t)})))()}}},57:function(e,t,n){"use strict";n(30);var r=n(2),o=n(40);function c(e,t){return{get:function(){return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.getSettings(e,t);case 2:return r=n.sent,console.log("settings."+e+".get:",r),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},set:function(t){return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("settings."+e+".set:",t),n.next=3,o.a.setSettings(e,t);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}}}t.a={ts:c("ts",0),useDarkTheme:c("useDarkTheme","true"),fontScale:c("fontScale",100),updateDB:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("settings.updateDB"),t.next=3,o.a.updateDB();case 3:return n=t.sent,t.next=6,e.ts.set(n);case 6:case"end":return t.stop()}}),t)})))()}}}},[[162,7,3,8]]]);